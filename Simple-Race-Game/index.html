<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8"/>
        <title> Simple Race Game |  Alex Catalán</title>
        <link rel="stylesheet" href="/css/style.css" />
        <link rel="stylesheet" href="/css/syntax.css" />
        <link rel="stylesheet" href="/css/menu.css" />
        <link rel="stylesheet" href="/css/sidebar.css" />
        <meta name="description" content="Game Engineer"/>
        <meta name="author" content="Alex Catalán"/>
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
        <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed.xml" />

        <link rel="stylesheet" href="/resources/fontello/css/fontello.css">
        <link rel="stylesheet" href="/resources/fontello/css/animation.css">

        <script type="text/javascript"
            src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>

        <!--[if IE 7]><link rel="stylesheet" href="/resources/fontello/css/fontello-ie7.css"><![endif]-->
    </head>

    <body>
        
        <header>
            <h1><a href="/">Alex Catalán</a></h1>
                <h4>Game Engineer</h4>
            <hr />
        </header>

        <main>

            <div id="menu">
                <ul>
                    <a href="/"><li><i class="icon-home"></i>Home</li></a>
                    <li><i class="icon-tag"></i>Categories 
                        <ul>
                            
                            <a href="/computational geometry"><li>computational geometry</li></a>
                            
                            <a href="/graphics"><li>graphics</li></a>
                            
                            <a href="/interactive systems"><li>interactive systems</li></a>
                            
                            <a href="/unity3d"><li>unity3d</li></a>
                            
                            <a href="/games"><li>games</li></a>
                            
                        </ul>
                    </li>

                    <a href="/archive"><li><i class="icon-th"></i>Archive</li></a>
                    <li><i class="icon-user"></i>Personal
                        <ul>
                            <a href="/curriculum"><li>Curriculum</li></a>
                            <a href="/cover-letter"><li>Cover Letter</li></a>
                        </ul>
                    </li>
                </ul>
            </div>
            <article>
        <header>
            <h2>Simple Race Game</h2>
            <metadata>
                <span class="date"><i class="icon-clock"></i><time datetime="2013-07-21">Jul 21, 2013</time></span> | <span class="category"><i class="icon-tag"></i> 
                
                <a href="/interactive systems" >interactive systems</a>
                 
                </span> | <span class="author"><i class="icon-user"></i> Alex Catalán</span>
            </metadata>
            <img src="/assets//2013-07-21-Simple-Race-Game/header.jpg" >
        </header>

        <div class="entry"><p style="text-align:justify;">
    In the last quarter of this year in college, I am studying Interactive Systems. In this course we started working with OpenFrameworks, which is nothing more than a framework that makes it easy to use OpenGL and development of 2D and 3D Applications. The first project that we are developing is a 2D multiplayer racing game.
</p>




<p>
    <!--more-->
</p>




<div>
    <h2>
       Framework
   </h2>

   <p style="text-align:justify;">
       First we have to download from <a href="http://www.openframeworks.cc/download/">OpenFrameworks</a> website the latest release for the IDE we use, in this case we use Code Blocks. Once downloaded and unzipped wherever you want, go to the folder /apps/myApps/emptyExample, there you will find what you need to start immediately. If we open the file emptyExample.workspace with Code Blocks, we can see 3 files created in the folder /src.
   </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno"> 1</span> <span class="cp">#include &quot;testApp.h&quot;</span>
<span class="lineno"> 2</span> <span class="cp">#include &quot;ofAppGlutWindow.h&quot;</span>
<span class="lineno"> 3</span> 
<span class="lineno"> 4</span> <span class="c1">//--------------------------------------------------------------</span>
<span class="lineno"> 5</span> <span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
<span class="lineno"> 6</span>     <span class="n">ofAppGlutWindow</span> <span class="n">window</span><span class="p">;</span> <span class="c1">// create a window</span>
<span class="lineno"> 7</span>     <span class="c1">// set width, height, mode (OF_WINDOW or OF_FULLSCREEN)</span>
<span class="lineno"> 8</span>     <span class="n">ofSetupOpenGL</span><span class="p">(</span><span class="o">&amp;</span><span class="n">window</span><span class="p">,</span> <span class="mi">1024</span><span class="p">,</span> <span class="mi">768</span><span class="p">,</span> <span class="n">OF_WINDOW</span><span class="p">);</span>
<span class="lineno"> 9</span>     <span class="n">ofRunApp</span><span class="p">(</span><span class="k">new</span> <span class="n">testApp</span><span class="p">());</span> <span class="c1">// start the app</span>
<span class="lineno">10</span> <span class="p">}</span></code></pre></div>


    <p style="text-align:justify;">
        In the main.cpp file, basically is created a window with the dimensions in which the game will run. Once created the application runs.
    </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno"> 1</span> <span class="cp">#pragma once</span>
<span class="lineno"> 2</span> <span class="cp">#include &quot;ofMain.h&quot;</span>
<span class="lineno"> 3</span> 
<span class="lineno"> 4</span> <span class="k">class</span> <span class="nc">testApp</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ofBaseApp</span><span class="p">{</span>
<span class="lineno"> 5</span>     <span class="k">public</span><span class="o">:</span>
<span class="lineno"> 6</span>     <span class="kt">void</span> <span class="n">setup</span><span class="p">();</span>
<span class="lineno"> 7</span>     <span class="kt">void</span> <span class="nf">update</span><span class="p">();</span>
<span class="lineno"> 8</span>     <span class="kt">void</span> <span class="nf">draw</span><span class="p">();</span>
<span class="lineno"> 9</span> 
<span class="lineno">10</span>     <span class="kt">void</span> <span class="nf">keyPressed</span><span class="p">(</span><span class="kt">int</span> <span class="n">key</span><span class="p">);</span>
<span class="lineno">11</span>     <span class="kt">void</span> <span class="nf">keyReleased</span><span class="p">(</span><span class="kt">int</span> <span class="n">key</span><span class="p">);</span>
<span class="lineno">12</span>     <span class="kt">void</span> <span class="nf">mouseMoved</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">);</span>
<span class="lineno">13</span>     <span class="kt">void</span> <span class="nf">mouseDragged</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">button</span><span class="p">);</span>
<span class="lineno">14</span>     <span class="kt">void</span> <span class="nf">mousePressed</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">button</span><span class="p">);</span>
<span class="lineno">15</span>     <span class="kt">void</span> <span class="nf">mouseReleased</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">button</span><span class="p">);</span>
<span class="lineno">16</span>     <span class="kt">void</span> <span class="nf">windowResized</span><span class="p">(</span><span class="kt">int</span> <span class="n">w</span><span class="p">,</span> <span class="kt">int</span> <span class="n">h</span><span class="p">);</span>
<span class="lineno">17</span>     <span class="kt">void</span> <span class="nf">dragEvent</span><span class="p">(</span><span class="n">ofDragInfo</span> <span class="n">dragInfo</span><span class="p">);</span>
<span class="lineno">18</span>     <span class="kt">void</span> <span class="nf">gotMessage</span><span class="p">(</span><span class="n">ofMessage</span> <span class="n">msg</span><span class="p">);</span>
<span class="lineno">19</span> <span class="p">};</span></code></pre></div>


    <p style="text-align:justify;">
        In the testApp.h, we can see the basis for every application, and some key, mouse and windows events.<br />
        The setup() method, sets all the elements of the application, this method will only be called at the beginning of the application. <br />
        The update() method, updates all the elements of the application, this method will be called in every iteration of the application. <br />
        The draw() method, draw all the elements of the application for the next frame that is going to show at screen, this method will be called after every update().
    </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno">1</span> <span class="kt">void</span> <span class="n">testApp</span><span class="o">::</span><span class="n">setup</span><span class="p">(){</span>
<span class="lineno">2</span>     <span class="n">ofEnableAlphaBlendhighlighting</span><span class="p">();</span>
<span class="lineno">3</span>     <span class="c1">// We set the application to run at 60 FPS.</span>
<span class="lineno">4</span>     <span class="n">ofSetFrameRate</span><span class="p">(</span><span class="mi">60</span><span class="p">);</span>
<span class="lineno">5</span>     <span class="p">...</span>
<span class="lineno">6</span> <span class="p">}</span></code></pre></div>


    <p style="text-align:justify;">
        At setup(), enable Alpha Blendhighlighting for rendhighlightering with transparency, here what oF does is call glEnable(GL_BLendhighlight); to rise OpenGL Blengin flag; and set the frame rate at 60FPS. Later we&#039;ll see what objects we set up, we must first create them.<br />
        For the moment, the methods update() and draw() are empty. We could paint the window background in white or black (or whatever we wanted) using ofBackground(r,g,b);
    </p>

    <h2>
        Car
    </h2>

    <p style="text-align:justify;">
        Once we have an area to play, we need a toy. As we saw at class testApp, we create a new class with the 3 basic methods, setup(), update() and draw(), and some necessary attributes.
    </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno"> 1</span> <span class="k">class</span> <span class="nc">Car</span><span class="p">{</span>
<span class="lineno"> 2</span>     <span class="k">public</span><span class="o">:</span>
<span class="lineno"> 3</span>     <span class="c1">// We declare the basic methods for the class.</span>
<span class="lineno"> 4</span>     <span class="n">Car</span><span class="p">();</span>
<span class="lineno"> 5</span>     <span class="o">~</span><span class="n">Car</span><span class="p">();</span>
<span class="lineno"> 6</span> 
<span class="lineno"> 7</span>     <span class="kt">void</span> <span class="nf">setup</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">,</span><span class="kt">float</span> <span class="n">width</span><span class="p">,</span> <span class="kt">float</span> <span class="n">height</span><span class="p">);</span>
<span class="lineno"> 8</span>     <span class="kt">void</span> <span class="nf">update</span><span class="p">(</span><span class="kt">float</span> <span class="n">dt</span><span class="p">);</span>
<span class="lineno"> 9</span>     <span class="kt">void</span> <span class="nf">draw</span><span class="p">();</span>
<span class="lineno">10</span> 
<span class="lineno">11</span>     <span class="c1">//GETERS &amp; SETERS//</span>
<span class="lineno">12</span>     <span class="p">...</span>
<span class="lineno">13</span> 
<span class="lineno">14</span>     <span class="k">private</span><span class="o">:</span>
<span class="lineno">15</span>     <span class="n">ofPoint</span>   <span class="n">car_position_</span><span class="p">;</span>
<span class="lineno">16</span>     <span class="kt">float</span>     <span class="n">car_rotation_</span><span class="p">;</span>
<span class="lineno">17</span>     <span class="kt">float</span>     <span class="n">car_speed_</span><span class="p">;</span>
<span class="lineno">18</span>     <span class="n">ofImage</span><span class="o">*</span>  <span class="n">texture_</span><span class="p">;</span>
<span class="lineno">19</span> 
<span class="lineno">20</span>     <span class="kt">float</span>     <span class="n">car_width_</span><span class="p">;</span>
<span class="lineno">21</span>     <span class="kt">float</span>     <span class="n">car_height_</span><span class="p">;</span>
<span class="lineno">22</span> <span class="p">}</span></code></pre></div>


    <p style="text-align:justify;">
        We give values ​​to the setup() to configure the car. Setting the initial position (x,y) in the window and the texture size of the car (width,height), and the initial speed as 0 (we don&#039;t want the car run like crazy) and rotation to where it should be aimed initially in degrees (45&ordm; = diagonal up-right)..<br />
        These data will be stored in the attributes of the class, in addition to the car&#039;s speed, the rotation and its texture.<br />
        To modify all attributes also implement their getters and setters. With the only difference set_texture(), which will load the texture in memory.
    </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno">1</span> <span class="kt">void</span> <span class="n">Car</span><span class="o">::</span><span class="n">set_texture</span><span class="p">(</span><span class="n">string</span> <span class="n">path</span><span class="p">){</span>
<span class="lineno">2</span>     <span class="n">texture_</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ofImage</span><span class="p">();</span>
<span class="lineno">3</span>     <span class="n">texture_</span><span class="o">-&gt;</span><span class="p">;</span><span class="n">loadImage</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
<span class="lineno">4</span> <span class="p">}</span></code></pre></div>


    <p style="text-align:justify;">
        <img class="alignright" src="/assets/2013-07-21-Simple-Race-Game/rotation.png" width="150" height="150">
        <!--<a href="http://www.madowen.es/wp-content/uploads/2013/04/rotation.png" rel="" style="font-size:13px;text-align:justify;" target="" title=""><img alt="rotation" class="alignright size-full wp-image-103" height="150" src="http://www.madowen.es/wp-content/uploads/2013/04/rotation.png" title="Rotation calc" width="155" /></a>--> Now that we have set the car, we have to make it move. To calculate the position in the next frame, which must be the car when in motion, we will consider the current position, rotation, and the speed at which the car moves.<br>
        First we calculate the direction in which we should move, using the cosine and sine of the car&#039;s rotation, it will provide us a unit vector (length = 1) which will be multiplied by the car&#039;s speed to get the distance advanced in the cycle. And we will add to the current position.<br>
    </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno">1</span> <span class="kt">void</span> <span class="n">Car</span><span class="o">::</span><span class="n">update</span><span class="p">(</span><span class="kt">float</span> <span class="n">dt</span><span class="p">){</span>
<span class="lineno">2</span>     <span class="c1">//cos() and sin() works in radians, so we have to transform degree-&gt;;radian</span>
<span class="lineno">3</span>     <span class="n">ofVec2f</span> <span class="n">turn</span><span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">car_rotation_</span><span class="o">*</span><span class="n">PI</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span><span class="n">sin</span><span class="p">(</span><span class="n">car_rotation_</span><span class="o">*</span><span class="n">PI</span><span class="o">/</span><span class="mi">180</span><span class="p">));</span>
<span class="lineno">4</span>     <span class="n">ofPoint</span> <span class="n">new_position</span> <span class="o">=</span> <span class="n">car_position_</span><span class="o">+</span><span class="n">turn</span><span class="o">*</span><span class="n">car_speed_</span><span class="o">*</span><span class="n">dt</span><span class="p">;</span>
<span class="lineno">5</span> 
<span class="lineno">6</span>     <span class="n">car_position_</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">new_position</span><span class="p">);</span>
<span class="lineno">7</span> <span class="p">}</span></code></pre></div>


    <p style="text-align:justify;">
        The dt component, is the delta-time that is to correct the frame rate fluctuation.
    </p>

    <p style="text-align:justify;">
        Once we know what position should be the car when moving, we have to draw it on the screen. To do this, we will move the object in the 2D world, translating to the position that we calculated before, and also rotating to aim according to need.
    </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno"> 1</span> <span class="kt">void</span> <span class="n">Car</span><span class="o">::</span><span class="n">draw</span><span class="p">(){</span>
<span class="lineno"> 2</span>     <span class="n">ofPushMatrix</span><span class="p">();</span>
<span class="lineno"> 3</span>     <span class="n">ofTranslate</span><span class="p">(</span><span class="n">car_position_</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">car_position_</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>   <span class="c1">//translate to correct position</span>
<span class="lineno"> 4</span>     <span class="n">ofTranslate</span><span class="p">(</span><span class="n">car_width_</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">car_height_</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>        <span class="c1">//move to the texture center</span>
<span class="lineno"> 5</span>     <span class="n">ofRotate</span><span class="p">(</span><span class="n">car_rotation_</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>                  <span class="c1">//rotate to correct orientation</span>
<span class="lineno"> 6</span> 
<span class="lineno"> 7</span>     <span class="n">ofTranslate</span><span class="p">(</span><span class="o">-</span><span class="n">car_width_</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="n">car_height_</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>      <span class="c1">//return to correct position</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span>     <span class="n">texture_</span><span class="o">-&gt;</span><span class="p">;</span><span class="n">draw</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">car_width_</span><span class="p">,</span><span class="n">car_height_</span><span class="p">);</span>     <span class="c1">//draw the texture</span>
<span class="lineno">10</span>     <span class="n">ofPopMatrix</span><span class="p">();</span>
<span class="lineno">11</span> <span class="p">}</span></code></pre></div>

</div>


<div>
    <h2>
       Scenario
   </h2>

   <p style="text-align:justify;">
       What would be a racing game without a track where to compete? As each class in the class Scenario, we define the 3 basic methods, in addition to its attributes and functions needed for the class.
   </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno"> 1</span> <span class="k">class</span> <span class="nc">Scenario</span><span class="p">{</span>
<span class="lineno"> 2</span>     <span class="k">public</span><span class="o">:</span>
<span class="lineno"> 3</span>     <span class="c1">// Declaration of the basic methods for the scenario class.</span>
<span class="lineno"> 4</span>     <span class="n">Scenario</span><span class="p">();</span>
<span class="lineno"> 5</span>     <span class="o">~</span><span class="n">Scenario</span><span class="p">();</span>
<span class="lineno"> 6</span> 
<span class="lineno"> 7</span>     <span class="kt">void</span> <span class="nf">setup</span><span class="p">();</span>
<span class="lineno"> 8</span>     <span class="kt">void</span> <span class="nf">update</span><span class="p">();</span>
<span class="lineno"> 9</span>     <span class="kt">void</span> <span class="nf">draw</span><span class="p">();</span>
<span class="lineno">10</span> 
<span class="lineno">11</span>     <span class="c1">//GETERS &amp; SETERS//</span>
<span class="lineno">12</span>     <span class="p">...</span>
<span class="lineno">13</span> 
<span class="lineno">14</span>     <span class="k">private</span><span class="o">:</span>
<span class="lineno">15</span>     <span class="n">ofImage</span><span class="o">**</span>        <span class="n">texture_array_</span><span class="p">;</span>
<span class="lineno">16</span>     <span class="kt">int</span><span class="o">*</span>             <span class="n">scenario_array_</span><span class="p">;</span>
<span class="lineno">17</span>     <span class="n">vector</span>  <span class="n">trees_vector_</span><span class="p">;</span>
<span class="lineno">18</span> 
<span class="lineno">19</span>     <span class="kt">int</span>              <span class="n">scenario_width_</span><span class="p">;</span>
<span class="lineno">20</span>     <span class="kt">int</span>              <span class="n">scenario_height_</span><span class="p">;</span>
<span class="lineno">21</span> 
<span class="lineno">22</span>     <span class="kt">float</span>            <span class="n">tile_width_</span><span class="p">;</span>
<span class="lineno">23</span>     <span class="kt">float</span>            <span class="n">tile_height_</span><span class="p">;</span>
<span class="lineno">24</span> <span class="p">};</span></code></pre></div>


    <p style="text-align:justify;">
        The texture array stores all different tiles to draw the track, the scenario array gives shape to the track with the indices from the texture array, also we define a vector to draw some trees. The width and height atributes are given by the number of tiles that fill the screen, it will have width*height tiles. And it is necessary set the width and height of the tiles.<br />
        At the constructor, we reserve the space in memory for the instantiation of the class.
    </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno"> 1</span> <span class="n">Scenario</span><span class="o">::</span><span class="n">Scenario</span><span class="p">(){</span>
<span class="lineno"> 2</span>     <span class="n">texture_array_</span> <span class="o">=</span> <span class="p">(</span><span class="n">ofImage</span><span class="o">**</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="mi">7</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="n">ofImage</span><span class="o">*</span><span class="p">));</span>
<span class="lineno"> 3</span> 
<span class="lineno"> 4</span>     <span class="n">scenario_width_</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
<span class="lineno"> 5</span>     <span class="n">scenario_height_</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
<span class="lineno"> 6</span> 
<span class="lineno"> 7</span>     <span class="n">tile_width_</span> <span class="o">=</span> <span class="n">ofGetWidth</span><span class="p">()</span><span class="o">/</span><span class="n">scenario_width_</span><span class="p">;</span>
<span class="lineno"> 8</span>     <span class="n">tile_height_</span> <span class="o">=</span> <span class="n">ofGetHeight</span><span class="p">()</span><span class="o">/</span><span class="n">scenario_height_</span><span class="p">;</span>
<span class="lineno"> 9</span> 
<span class="lineno">10</span>     <span class="n">scenario_array_</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">scenario_width_</span><span class="o">*</span><span class="n">scenario_height_</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
<span class="lineno">11</span> <span class="p">}</span></code></pre></div>


    <p style="text-align:justify;">
        We allocate memory for 7 different tiles to draw the track, which will have 8*6 tiles. To draw the tiles so that they fill 100% of the screen, we divide the width of the screen by the number of tiles widthwise, and the same for the height. And finally allocate memory for 8*6 indices that will define the shape of the track.<br />
        With the allocated memory, we load the textures and set the scenario in the setup() method.
    </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno"> 1</span> <span class="kt">void</span> <span class="n">Scenario</span><span class="o">::</span><span class="n">setup</span><span class="p">(){</span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span>     <span class="c1">// Just for loading purposes we print by console when we start loading the scenario.</span>
<span class="lineno"> 4</span>     <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;LOADING SCENARIO&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="lineno"> 5</span> 
<span class="lineno"> 6</span>     <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;SCENARIO: LOADING TILES IMAGES&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="lineno"> 7</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">0</span><span class="p">))</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ofImage</span><span class="p">();</span>
<span class="lineno"> 8</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">0</span><span class="p">))</span><span class="o">-&gt;</span><span class="n">loadImage</span><span class="p">(</span><span class="s">&quot;track/grass.jpg&quot;</span><span class="p">);</span>
<span class="lineno"> 9</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ofImage</span><span class="p">();</span>
<span class="lineno">10</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span><span class="o">-&gt;</span><span class="n">loadImage</span><span class="p">(</span><span class="s">&quot;track/racing_curve_1.jpg&quot;</span><span class="p">);</span>
<span class="lineno">11</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">2</span><span class="p">))</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ofImage</span><span class="p">();</span>
<span class="lineno">12</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">2</span><span class="p">))</span><span class="o">-&gt;</span><span class="n">loadImage</span><span class="p">(</span><span class="s">&quot;track/racing_curve_2.jpg&quot;</span><span class="p">);</span>
<span class="lineno">13</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">3</span><span class="p">))</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ofImage</span><span class="p">();</span>
<span class="lineno">14</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">3</span><span class="p">))</span><span class="o">-&gt;</span><span class="n">loadImage</span><span class="p">(</span><span class="s">&quot;track/racing_curve_3.jpg&quot;</span><span class="p">);</span>
<span class="lineno">15</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">4</span><span class="p">))</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ofImage</span><span class="p">();</span>
<span class="lineno">16</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">4</span><span class="p">))</span><span class="o">-&gt;</span><span class="n">loadImage</span><span class="p">(</span><span class="s">&quot;track/racing_curve_4.jpg&quot;</span><span class="p">);</span>
<span class="lineno">17</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">5</span><span class="p">))</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ofImage</span><span class="p">();</span>
<span class="lineno">18</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">5</span><span class="p">))</span><span class="o">-&gt;</span><span class="n">loadImage</span><span class="p">(</span><span class="s">&quot;track/racing_road_vert.jpg&quot;</span><span class="p">);</span>
<span class="lineno">19</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">6</span><span class="p">))</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ofImage</span><span class="p">();</span>
<span class="lineno">20</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">6</span><span class="p">))</span><span class="o">-&gt;</span><span class="n">loadImage</span><span class="p">(</span><span class="s">&quot;track/racing_road_hor.jpg&quot;</span><span class="p">);</span>
<span class="lineno">21</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">7</span><span class="p">))</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ofImage</span><span class="p">();</span>
<span class="lineno">22</span>     <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">7</span><span class="p">))</span><span class="o">-&gt;</span><span class="n">loadImage</span><span class="p">(</span><span class="s">&quot;track/Tree.png&quot;</span><span class="p">);</span>
<span class="lineno">23</span> 
<span class="lineno">24</span>     <span class="n">trees_vector_</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">ofPoint</span><span class="p">(</span><span class="mi">187</span><span class="p">,</span> <span class="mi">441</span><span class="p">));</span>
<span class="lineno">25</span>     <span class="n">trees_vector_</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">ofPoint</span><span class="p">(</span><span class="mi">221</span><span class="p">,</span> <span class="mi">307</span><span class="p">));</span>
<span class="lineno">26</span>     <span class="n">trees_vector_</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">ofPoint</span><span class="p">(</span><span class="mi">563</span><span class="p">,</span> <span class="mi">226</span><span class="p">));</span>
<span class="lineno">27</span>     <span class="n">trees_vector_</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">ofPoint</span><span class="p">(</span><span class="mi">509</span><span class="p">,</span> <span class="mi">595</span><span class="p">));</span>
<span class="lineno">28</span>     <span class="n">trees_vector_</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">ofPoint</span><span class="p">(</span><span class="mi">903</span><span class="p">,</span> <span class="mi">229</span><span class="p">));</span>
<span class="lineno">29</span>     <span class="n">trees_vector_</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">ofPoint</span><span class="p">(</span><span class="mi">755</span><span class="p">,</span> <span class="mi">364</span><span class="p">));</span>
<span class="lineno">30</span> 
<span class="lineno">31</span>     <span class="kt">int</span> <span class="n">temp</span><span class="p">[]</span> <span class="o">=</span>       <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
<span class="lineno">32</span>     <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="lineno">33</span>     <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
<span class="lineno">34</span>     <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
<span class="lineno">35</span>     <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span>
<span class="lineno">36</span>     <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span>
<span class="lineno">37</span>     <span class="n">memcpy</span><span class="p">(</span><span class="n">scenario_array_</span><span class="p">,</span><span class="n">temp</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="n">temp</span><span class="p">));</span>
<span class="lineno">38</span> <span class="p">}</span></code></pre></div>


    <p style="text-align:justify;">
        First we load the 7 different tiles for later drawing the scenario given by the scenario array. The sequence to load the images are used for indices that we use in the scenario array. Will place the trees in different positions of the screen. Initialize the scenario with 8*6 indices, according to the tiles we want to use to shape the track. (I&#039;m copying from temp to scenario_array because an int* can&#039;t be initialized as a list)
    </p>

    <p style="text-align:justify;">
        <img src="/assets/2013-07-21-Simple-Race-Game/SRC-Tiles.jpg">
        <!--<a href="http://www.madowen.es/wp-content/uploads/2013/04/SRC-Tiles.jpg"><img alt="SRC - Tiles" class="aligncenter size-full wp-image-134" height="120" src="http://www.madowen.es/wp-content/uploads/2013/04/SRC-Tiles.jpg" width="959" /></a>-->
    </p>

    <p style="text-align:justify;">
        As the scenario represents the track where cars run, and it is an inanimate object, that will not change over time, the update() method will be empty.
    </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno"> 1</span> <span class="kt">void</span> <span class="n">Scenario</span><span class="o">::</span><span class="n">draw</span><span class="p">(){</span>
<span class="lineno"> 2</span>     <span class="c1">// We set the color to draw at pure white.</span>
<span class="lineno"> 3</span>     <span class="n">ofSetColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span>     <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">scenario_height_</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">){</span>
<span class="lineno"> 6</span>         <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">scenario_width_</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
<span class="lineno"> 7</span>             <span class="kt">int</span> <span class="n">tile_type</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="n">scenario_array_</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="n">scenario_width_</span><span class="o">+</span><span class="n">i</span><span class="p">);</span>
<span class="lineno"> 8</span>             <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="n">tile_type</span><span class="p">))</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">tile_width_</span><span class="p">,</span> <span class="n">j</span><span class="o">*</span><span class="n">tile_height_</span><span class="p">,</span> <span class="n">tile_width_</span><span class="p">,</span> <span class="n">tile_height_</span><span class="p">);</span>
<span class="lineno"> 9</span>         <span class="p">}</span>
<span class="lineno">10</span>     <span class="p">}</span>
<span class="lineno">11</span> 
<span class="lineno">12</span>     <span class="k">for</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">::</span><span class="n">iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">trees_vector_</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span> <span class="p">;</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">trees_vector_</span><span class="p">.</span><span class="n">endhighlight</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">){</span>
<span class="lineno">13</span>         <span class="n">ofPushMatrix</span><span class="p">();</span>
<span class="lineno">14</span>         <span class="n">ofTranslate</span><span class="p">((</span><span class="o">*</span><span class="n">it</span><span class="p">).</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">).</span><span class="n">y</span><span class="p">);</span>
<span class="lineno">15</span>         <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">texture_array_</span><span class="o">+</span><span class="mi">7</span><span class="p">))</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tile_width_</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">tile_height_</span><span class="o">/</span><span class="mi">3</span><span class="p">);</span>
<span class="lineno">16</span>         <span class="n">ofPopMatrix</span><span class="p">();</span>
<span class="lineno">17</span>     <span class="p">}</span>
<span class="lineno">18</span> <span class="p">}</span></code></pre></div>


    <p style="text-align:justify;">
        In the draw() method has to loop the scenario array to get wich texture should be rendhighlighter, then draw it in the expected position. To draw the tree we iterate over the tree vector using an iterator to go through, iterators tendhighlight to be the most efficient way to search through a data container. For each position we do a push and popMatrix() so the call to ofTranslate() will not affect the posterior rendhighlighter in the game loop. By calling the ofTranslate(), we can pass as x and y arguments to ofImagen().draw() the values 0, 0.
    </p>

</div>


<div>
    <h2>
       Gameplay &amp; Fixes
   </h2>

   <p style="text-align:justify;">
       Now that we have ready the Scenario and Car classes, we should add them to the framework and initialize in the setup() method of the testApp class. We only need one instance of Scenario, but we could need more than one car if we want to play with friendhighlights, so they will be instantiated in an array of Car.<br />
       The initialization is quite simple, just call the setup() method of the scenario and the cars, passing to each car its initial position and size of the texture.
   </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno">1</span> <span class="n">scenario_</span><span class="p">.</span><span class="n">setup</span><span class="p">();</span>
<span class="lineno">2</span> <span class="n">cars_</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">setup</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span><span class="mf">37.5</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span>
<span class="lineno">3</span> <span class="n">cars_</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">set_texture</span><span class="p">(</span><span class="s">&quot;cars/Red.png&quot;</span><span class="p">);</span></code></pre></div>


    <p style="text-align:justify;">
        <img class="alignright" src="/assets/2013-07-21-Simple-Race-Game/Red.png">
        <!--<a href="http://www.madowen.es/wp-content/uploads/2013/04/Red.png"><img alt="Red" class="alignright size-full wp-image-136" height="98" src="http://www.madowen.es/wp-content/uploads/2013/04/Red.png" title="Red" width="127" /></a>-->Right now, if we draw the scenario and cars in the method draw () and run the project, we have running our game, but we can not move the car. In order for the car move using the keyboard, we need to capture the event that happens when any key is pressed and when is released. The framework has already implemented these methods, but we have to tell them what to do when a button is pushed and released.
    </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno">1</span> <span class="kt">void</span> <span class="n">testApp</span><span class="o">::</span><span class="n">keyPressed</span><span class="p">(</span><span class="kt">int</span> <span class="n">key</span><span class="p">){</span>
<span class="lineno">2</span>     <span class="n">key_Pressed</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="lineno">3</span> <span class="p">}</span>
<span class="lineno">4</span> 
<span class="lineno">5</span> <span class="kt">void</span> <span class="n">testApp</span><span class="o">::</span><span class="n">keyReleased</span><span class="p">(</span><span class="kt">int</span> <span class="n">key</span><span class="p">){</span>
<span class="lineno">6</span>     <span class="n">key_Pressed</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="lineno">7</span> <span class="p">}</span></code></pre></div>


    <p style="text-align:justify;">
        Quite simple, we store a boolean array wich key was pressed or not, using as index the int value of the key. Doing this way, we can press more than one key at the time.<br />
        Now that we have the keys pressed or not, the game has to tell the car what to do on every frame for each key pressed.
    </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno"> 1</span> <span class="kt">void</span> <span class="n">testApp</span><span class="o">::</span><span class="n">update</span><span class="p">(){</span>
<span class="lineno"> 2</span>     <span class="k">if</span> <span class="p">(</span><span class="n">key_Pressed</span><span class="p">[</span><span class="sc">&#39;w&#39;</span><span class="p">])</span> <span class="c1">//Up</span>
<span class="lineno"> 3</span>         <span class="n">cars_</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">car_accelerate</span><span class="p">();</span>
<span class="lineno"> 4</span>     <span class="k">if</span> <span class="p">(</span><span class="n">key_Pressed</span><span class="p">[</span><span class="sc">&#39;a&#39;</span><span class="p">])</span> <span class="c1">//Left</span>
<span class="lineno"> 5</span>         <span class="n">cars_</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">car_turn_left</span><span class="p">();</span>
<span class="lineno"> 6</span>     <span class="k">if</span> <span class="p">(</span><span class="n">key_Pressed</span><span class="p">[</span><span class="sc">&#39;d&#39;</span><span class="p">])</span> <span class="c1">//Right</span>
<span class="lineno"> 7</span>         <span class="n">cars_</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">car_turn_right</span><span class="p">();</span>
<span class="lineno"> 8</span>     <span class="k">if</span> <span class="p">(</span><span class="n">key_Pressed</span><span class="p">[</span><span class="sc">&#39;s&#39;</span><span class="p">])</span> <span class="c1">//Down</span>
<span class="lineno"> 9</span>         <span class="n">cars_</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">car_reverse</span><span class="p">();</span>
<span class="lineno">10</span>     <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">key_Pressed</span><span class="p">[</span><span class="sc">&#39;w&#39;</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">key_Pressed</span><span class="p">[</span><span class="sc">&#39;s&#39;</span><span class="p">])</span> <span class="c1">//If the accelerating and reverse button are not pressed, the car breaks</span>
<span class="lineno">11</span>         <span class="n">cars_</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">car_break</span><span class="p">();</span>
<span class="lineno">12</span> 
<span class="lineno">13</span>     <span class="n">cars_</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">);</span>
<span class="lineno">14</span> <span class="p">}</span></code></pre></div>

    <p style="text-align:justify;">
        Since for each frame we want the car to move, we will check in the update() if keys are pressed to move the car. Also if we want that when we do not press any key the car breaks, we have to check that the keys to accelerate and reverse are not pressed. The methods we use are pretty obviuos, accelerate, break and reverse increments or decrements the car speed atribute, and turn_right and turn_left increments or decrements the car rotation atribute. 
    </p>

    <p style="text-align:justify;">
        Now that we can move our car across the scenario, problems arise. The most important thing to fix is the fact that we can get out of the screen. To fix that exists an OpenFramework method that returns true if a value is between a range, we use this method to check if our car will be outside the screen when we update its position, if it is true it won't move to the new position. This check has to be done every time that we want to move our car, so we add it at car's update() method.
    </p>


<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="lineno">1</span> <span class="kt">void</span> <span class="n">Car</span><span class="o">::</span><span class="n">update</span><span class="p">(</span><span class="kt">float</span> <span class="n">dt</span><span class="p">){</span>
<span class="lineno">2</span>     <span class="n">ofVec2f</span> <span class="n">turn</span><span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">car_rotation_</span><span class="o">*</span><span class="n">PI</span><span class="o">/</span><span class="mi">180</span><span class="p">),</span><span class="n">sin</span><span class="p">(</span><span class="n">car_rotation_</span><span class="o">*</span><span class="n">PI</span><span class="o">/</span><span class="mi">180</span><span class="p">));</span> <span class="c1">//cos() and sin() works in radians</span>
<span class="lineno">3</span>     <span class="n">ofPoint</span> <span class="n">new_point</span> <span class="o">=</span> <span class="n">car_position_</span><span class="o">+</span><span class="n">turn</span><span class="o">*</span><span class="n">car_speed_</span><span class="o">*</span><span class="n">dt</span><span class="p">;</span>
<span class="lineno">4</span> 
<span class="lineno">5</span>     <span class="c1">//The position is only setted if we are on the limits of the scenario</span>
<span class="lineno">6</span>     <span class="k">if</span> <span class="p">(</span><span class="n">ofInRange</span><span class="p">(</span><span class="n">new_point</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="n">ofGetWidth</span><span class="p">()</span><span class="o">-</span><span class="n">car_width_</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">ofInRange</span><span class="p">(</span><span class="n">new_point</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">ofGetHeight</span><span class="p">()</span><span class="o">-</span><span class="n">car_height_</span><span class="p">))</span>
<span class="lineno">7</span>         <span class="n">car_position_</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">new_point</span><span class="p">);</span>
<span class="lineno">8</span> <span class="p">}</span></code></pre></div>


    <p style="text-align:justify;">
        From this point that we already have implemented the basic elements of game, simply must be added features like controlling the car goes through all the tiles forming the track, or when the car moves by the grass tiles, the speed is reduced, and even control the collisions between cars and trees.
    </p>

    <p style="text-align:justify;">
        <img src="/assets/2013-07-21-Simple-Race-Game/SRC-Track.jpg">
        <!--<a href="http://www.madowen.es/wp-content/uploads/2013/04/SRG-Track.jpg" rel="" target="" title=""><img alt="SRG - Track" class="aligncenter size-full wp-image-138" height="722" src="http://www.madowen.es/wp-content/uploads/2013/04/SRG-Track.jpg" title="SRG - Track" width="963" /></a>-->
    </p>

    <p style="text-align:justify;">
        Here you have the source code. <a href="/assets/2013-07-21-Simple-Race-Game/Simple-Race-Game-src.zip"><i class="icon-download"></i>SRG - src</a><br />
        Here you have the textures used and some extras. <a href="/assets/2013-07-21-Simple-Race-Game/data.zip"><i class="icon-download"></i>SRG - Tiles</a>
    </p>
</div>

</div>

        <footer><!-- additional info --></footer>

</article>

        </main>
        <aside id="sidebar">
            <img src="/perfil.jpg">
            <p>My name is Alex Catalán (<a href="https://github.com/madowen">MaDowen</a>) born in 1988 at Barcelona, Spain.</p>
            <p>Computer Engineer since 2015, I have proffesional experience on web and mobile development. Right now I'm working hard to get into the Game Industry in the future.</p>
            <p>I've been coding for over 7 years with multiple languajes. I have knowledge of 3D Programming. Now I'm learning WebGL and developing an Engine with it for my Degree Final Project.</p>
        </aside>

        <footer>
            <hr />
            <p>
                &copy; <time>2014</time> Alex Catalán
                <a href="mailto:mad.alexcc@gmail.com"><i class="icon-mail"></i></a>
                <a href="/feed.xml"><i class="icon-rss"></i>
            </p>
        </footer>

    </body>

</html>